# nonaga
『NONAGA（ノナガ）』は、自分の色のコマ3つを「直線」「三角形」「V字」のいずれかの形で先に揃えることを目指すアブストラクトゲーム（戦略ゲーム）です。

手番ではコマを1つ動かした後、盤面のタイルを1枚移動させるのが特徴です。六角形の盤面で、相手の動きを読みながら自分の有利な形を作る戦略性が魅力で、ルールはシンプルで分かりやすく、短時間で楽しめます。 


---

## 1. Nonaga（ノナガ）の解説

Nonagaは、3つの円盤（コマ）と19個のタイルを使用した2人対戦用ボードゲームです。

### 基本ルール

* **初期配置**: 19個の円形タイルを六角形状に並べ、各プレイヤーは自分の色のコマ3つを、六角形の頂点にあたる位置に配置します。
* **勝利条件**: 自分の3つのコマを、**隣接させた状態**に配置できたプレイヤーの勝ちです。

### 手番の流れ

自分の番が来たら、必ず以下の**2つのアクション**を順番に行います。

1. **コマの移動**: 自分のコマを1つ選び、直線方向に「障害物（他のコマか盤の端）」にぶつかるまで滑らせます。途中で止まることはできません。
2. **タイルの移動**: コマが乗っていないタイルを1枚選び、別の場所に再配置します。
* 移動後のタイルは、少なくとも他の2枚のタイルと接していなければなりません。
* タイルを移動させた結果、盤面が2つ以上に分断されてはいけません。



### ゲームの魅力

「自分の位置を有利にする」ことと「相手の足場を奪う」ことを同時に考える必要があり、非常にスリリングな展開が楽しめます。

---

## 2. Webアプリ開発仕様書

このゲームをReactやVueなどのモダンなフレームワークで作成することを想定した基本仕様書です。

### 【システム概要】

* **名称**: Nonaga Web
* **プラットフォーム**: Webブラウザ（レスポンシブ対応）
* **技術スタック案**: React / Next.js, Canvas API または SVG (盤面描画用), Zustand (状態管理)

### 【盤面データ構造】

盤面は「六角形グリッド（Hexagonal Grid）」で管理します。

* **座標系**: 立方座標系  または 軸座標系  を採用。
* **タイル情報**: `Map<string, Tile>` (キーは座標文字列)
* **コマ情報**: プレイヤーごとの現在座標リスト。

### 【機能要件】

| 機能カテゴリ | 詳細 |
| --- | --- |
| **ゲームフェーズ管理** | 「コマ移動待機」→「タイル移動待機」の手順を厳密に管理。 |
| **移動ロジック** | 指定方向の端、または他コマの手前まで座標を計算して移動。 |
| **タイルのバリデーション** | タイル移動時に「接続性チェック（BFS/DFSアルゴリズム）」を行い、盤面の分断を禁止する。 |
| **勝利判定** | 手順終了後、3つのコマの座標が隣接しているかを判定。 |
| **UI/UX** | タイルのドラッグ＆ドロップ操作、移動可能な場所のハイライト表示。 |

### 【主要アルゴリズム】

1. **スライド移動**:
方向ベクトル  に対して、次の座標が「タイルが存在する」かつ「コマが存在しない」間、座標を更新し続ける。
2. **接続性チェック（重要）**:
タイルを1枚取り除いたと仮定した状態で、任意のタイルから探索を開始し、全タイル（総数-1）に到達できるかを確認する。

